!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.VueFire=i():e.VueFire=i()}(this,function(){return function(e){function i(r){if(n[r])return n[r].exports;var t=n[r]={exports:{},id:r,loaded:!1};return e[r].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}var n={};return i.m=e,i.c=n,i.p="",i(0)}([function(e,i){function n(e){return"function"==typeof e.key?e.key():e.key}function r(e){return"function"==typeof e.ref?e=e.ref():"object"==typeof e.ref&&(e=e.ref),e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e){var i=e.val(),r=t(i)?i:{".value":i};return r[".key"]=n(e),r}function c(e,i){for(var n=0;n<e.length;n++)if(e[n][".key"]===i)return n;return-1}function s(e,i,n,o){var c=!1,s=null;if(t(n)&&n.hasOwnProperty("source")&&(c=n.asObject,s=n.cancelCallback,n=n.source),!t(n))throw new Error("VueFire: invalid Firebase binding source.");var f=r(n);e.$firebaseRefs[i]=f,e._firebaseSources[i]=n,c?l(e,i,n,s):o?u(e,i,n,o,s):a(e,i,n,s)}function f(e,i,n){i in e?e[i]=n:p.util.defineReactive(e,i,n)}function a(e,i,r,t){var s=[];f(e,i,s);var a=r.on("child_added",function(e,i){var n=i?c(s,i)+1:0;s.splice(n,0,o(e))},t),u=r.on("child_removed",function(e){var i=c(s,n(e));s.splice(i,1)},t),l=r.on("child_changed",function(e){var i=c(s,n(e));s.splice(i,1,o(e))},t),d=r.on("child_moved",function(e,i){var r=c(s,n(e)),t=s.splice(r,1)[0],o=i?c(s,i)+1:0;s.splice(o,0,t)},t);e._firebaseListeners[i]={child_added:a,child_removed:u,child_changed:l,child_moved:d}}function u(e,i,r,t,s){var a=[];f(e,i,a);var u=r.on("child_added",function(e,i){var r=n(e),f=i?c(a,i)+1:0;a.splice(f,0,o(e)),d(a,f,r,t.child(r),s)},s),l=r.on("child_removed",function(e){var i=c(a,n(e));b(a[i],n(e)),a.splice(i,1)},s),h=r.on("child_changed",function(e){var i=n(e),r=c(a,i);a.splice(r,1,o(e)),d(a,r,i,t.child(i),s)},s),v=r.on("child_moved",function(e,i){var r=c(a,n(e)),t=a.splice(r,1)[0],o=i?c(a,i)+1:0;a.splice(o,0,t)},s);e._firebaseListeners[i]={child_added:u,child_removed:l,child_changed:h,child_moved:v}}function l(e,i,n,r){f(e,i,{});var t=n.on("value",function(n){e[i]=o(n)},r);e._firebaseListeners[i]={value:t}}function d(e,i,n,t,c){var s=t.on("value",function(c){p.set(e,i,o(c));var f=r(t);h(e[i]),e[i].$firebaseRefs[n]=f,e[i]._firebaseSources[n]=t,e[i]._firebaseListeners[n]={value:s}},c)}function b(e,i){var n=e._firebaseSources&&e._firebaseSources[i];if(!n)throw new Error('VueFire: unbind failed: "'+i+'" is not bound to a Firebase reference.');var r=e._firebaseListeners[i];for(var t in r)n.off(t,r[t]);e[i]=null,e.$firebaseRefs[i]=null,e._firebaseSources[i]=null,e._firebaseListeners[i]=null}function h(e){e.$firebaseRefs||(e.$firebaseRefs=Object.create(null),e._firebaseSources=Object.create(null),e._firebaseListeners=Object.create(null))}function v(e){p=e,p.mixin(y);var i=p.config.optionMergeStrategies;i.firebase=i.methods,p.prototype.$bindAsObject=function(e,i,n){h(this),s(this,e,{source:i,asObject:!0,cancelCallback:n})},p.prototype.$bindAsArray=function(e,i,n){h(this),s(this,e,{source:i,cancelCallback:n})},p.prototype.$bindKeysAsArray=function(e,i,n,r){h(this),s(this,e,{source:i,cancelCallback:r},n)},p.prototype.$unbind=function(e){b(this,e)}}var p,_=function(){var e=this.$options.firebase;if("function"==typeof e&&(e=e.call(this)),e){h(this);for(var i in e)s(this,i,e[i])}},y={init:_,beforeCreate:_,beforeDestroy:function(){if(this.$firebaseRefs){for(var e in this.$firebaseRefs)this.$firebaseRefs[e]&&this.$unbind(e);this.$firebaseRefs=null,this._firebaseSources=null,this._firebaseListeners=null}}};"undefined"!=typeof window&&window.Vue&&v(window.Vue),e.exports=v}])});